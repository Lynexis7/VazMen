<nav class="navbar navbar-inverse sidebar" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="sidebar">
                <span class="sr-only">Toggle</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" routerLink="/home"></a>
        </div>

        <div class="collapse navbar-collapse" id="sidebar">
            <ul class="nav navbar-nav text-center">
                <button mat-flat-button class="sidebutton" routerLink="/ventas">
                    <mat-icon style="font-size: 40px;; position: fixed; left: 0;">attach_money</mat-icon>
                    <span style="margin-left: 10px">Ventas</span>
                </button>

                <button mat-flat-button class="sidebutton" routerLink="/gastos">
                    <mat-icon style="font-size: 40px; position: fixed; left: 0;">account_balance_wallet</mat-icon>
                    <span style="margin-left: 10px"> Gastos</span>
                </button>

                <button mat-flat-button class="sidebutton" routerLink="/proveedores">
                    <mat-icon style="font-size: 40px; position: fixed; left: 0;">shopping_cart</mat-icon>
                    <span style="margin-left: 10px">Proveedores</span>
                </button>

                <button mat-flat-button class="sidebutton" routerLink="/inventario">
                    <svg style="position: fixed; left: 0; margin-left:3px" width="2em" height="2em" viewBox="0 0 16 16"
                        class="bi bi-inboxes-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1H4.98zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374L3.81.563zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z" />
                    </svg>
                    <span style="margin-left: 10px"> Inventario</span>
                </button>

            </ul>
        </div>
    </div>
</nav>

<div class="main">

    <div class="container">
        <div class="row">
            <h1 style="font-weight: bold; color: #9e1313; font-size: x-large;">Ventas</h1>
        </div>
        <div class="row">
            <mat-card class="example-card">
                <mat-card-header>
                    <div mat-card-avatar class="example-header-image"></div>
                    <mat-card-subtitle style="margin-top:10px;">En esta ventana se generarán las ventas del inventario
                        disponible, así como poder
                        visualizar las ventas pendientes.</mat-card-subtitle>
                </mat-card-header>

                <mat-tab-group mat-stretch-tabs>
                    <mat-tab label="First" style="height: 400px;">
                        <ng-template mat-tab-label>
                            <mat-icon class="example-tab-icon">monetization_on</mat-icon>
                            Generar ventas
                        </ng-template>
                        <div class="row mt-5 text-center">
                            <form [formGroup]="ventasForm" style="width: 100%;">
                                <div class="col-md-5">
                                    <mat-button-toggle-group #group="matButtonToggleGroup" formControlName="Variedad">
                                        <mat-button-toggle *ngFor="let item of variedad" [value]="item.Variedad"
                                            aria-label="Text align left">
                                            <svg id="Layer_1" enable-background="new 0 0 512.041 512.041" height="32"
                                                viewBox="0 0 512.041 512.041" width="32"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <g style="fill:  #9e1313">
                                                    <path
                                                        d="m508.639 106.601c-6.577-35.463-24.034-61.439-54.938-81.748-19.423-12.763-42.352-20.987-66.307-23.781-24.33-2.836-48.587.085-70.146 8.451-39.401 15.291-67.197 47.681-78.266 91.202-6.428 25.274-17.46 44.081-29.852 60.483-19.52-16.599-44.87-26.441-72.486-27.955-29.746-1.641-59.514 6.269-83.826 22.246-27.983 18.39-43.792 41.914-49.748 74.033-5.333 28.753-2.76 61.63.497 103.253.491 6.277.996 12.731 1.482 19.287 3.042 46.176 29.764 88.475 75.244 119.106 38.205 25.731 86.558 40.842 130.247 40.842 1.449 0 2.901-.017 4.339-.051 31.5-.732 59.391-12.132 80.656-32.965 17.512-17.157 29.509-39.944 34.253-64.741 32.846-7.181 65.489-20.836 93.288-39.56 50.365-33.921 79.961-80.734 83.339-131.812.547-7.379 1.108-14.555 1.654-21.535 3.623-46.295 6.484-82.862.57-114.755zm-294.225 385.375c-29.489.681-61.68-6.43-90.919-19.62 9.299-6.766 21.19-17.164 24.894-28.211 1.756-5.236-1.065-10.905-6.302-12.661-5.236-1.752-10.905 1.065-12.66 6.302-2.398 7.151-16.295 18.201-26.264 24.117-3.994-2.322-7.903-4.757-11.698-7.313-40.231-27.097-63.834-63.972-66.465-103.913-.494-6.666-1-13.147-1.494-19.451-2.022-25.842-3.78-48.315-3.447-68.014 2.473.29 5.117.443 7.873.443 12.969 0 28.164-3.227 37.135-9.791 4.457-3.262 5.426-9.519 2.165-13.976-3.262-4.457-9.519-5.428-13.976-2.165-6.524 4.775-22.909 6.958-31.965 5.521 3.456-30.023 14.7-52.755 42.511-71.031 36.737-24.142 94.87-28.216 132.766 4.554-2.343 2.763-4.695 5.491-7.039 8.208-8.16 9.46-15.867 18.396-22.869 28.33-19.17 27.195-26.113 62.122-20.356 95.977-.024.021-.051.038-.075.06-5.937 5.247-25.017 7.923-36.517 7.758-.035 0-.07 0-.104 0-5.475 0-9.941 4.41-9.998 9.897-.057 5.522 4.375 10.045 9.897 10.103.071 0 .221.001.444.001 3.581 0 25.965-.307 41.386-7.59 2.135 6.484 4.745 12.863 7.868 19.062 22.269 44.192 64.027 70.213 114.568 71.389 1.598.037 3.203.056 4.813.056 9.787 0 19.787-.695 29.861-2.022-10.069 37.775-41.337 72.754-94.033 73.98zm272.052-250.512c-.002.027-.004.055-.006.082-2.949 44.777-29.427 86.177-74.556 116.571-13.762 9.269-28.795 17.189-44.438 23.571-4.942-13.031-17.47-27.084-27.01-31.855-4.943-2.47-10.947-.469-13.417 4.472-2.47 4.939-.468 10.946 4.472 13.417 5.378 2.689 14.283 13.216 17.197 20.786-24.798 7.946-50.435 12.015-74.469 11.461-42.917-.999-78.335-23.012-97.172-60.395-18.978-37.663-16.647-82.703 5.939-114.744 6.439-9.135 13.836-17.711 21.667-26.791 20.072-23.272 42.823-49.649 53.691-92.384 7.825-30.767 23.384-50.342 39.757-62.801 7.119 10.225 22.009 20.824 33.793 23.545.757.175 1.513.258 2.258.258 4.552 0 8.667-3.128 9.735-7.752 1.242-5.382-2.113-10.751-7.495-11.994-7.022-1.621-17.061-9.105-21.279-14.612 3.197-1.59 6.332-2.959 9.35-4.13 14.029-5.445 29.33-8.104 44.797-8.104 25.731 0 51.917 7.361 73.436 21.503 36.973 24.296 47.948 55.465 49.187 98.804-.133.088-.27.167-.4.263-9.556 6.99-34.358 9.626-44.606 6.207-5.239-1.744-10.902 1.086-12.649 6.325-1.746 5.239 1.086 10.902 6.325 12.649 4.887 1.629 11.389 2.437 18.481 2.437 10.755 0 22.861-1.863 32.743-5.535-.552 17.227-2.032 36.167-3.668 57.081-.547 7.021-1.113 14.241-1.663 21.665z" />
                                                    <path
                                                        d="m278.137 177.095c-5.513.331-9.714 5.069-9.383 10.582.332 5.514 5.086 9.717 10.582 9.383 10.786-.656 34.06 8.313 41.479 17.541 1.977 2.456 4.874 3.733 7.799 3.732 2.199 0 4.414-.722 6.262-2.207 4.304-3.462 4.986-9.757 1.525-14.061-11.764-14.626-41.889-25.97-58.264-24.97z" />
                                                    <path
                                                        d="m244.742 283.423c3.261-4.457 2.292-10.714-2.165-13.976-11.872-8.686-35.823-10.881-47.739-6.91-5.24 1.747-8.071 7.41-6.325 12.649 1.747 5.24 7.412 8.071 12.649 6.325 6.52-2.175 23.534-.365 29.604 4.076 1.781 1.303 3.848 1.931 5.897 1.931 3.082 0 6.121-1.418 8.079-4.095z" />
                                                    <path
                                                        d="m380.798 110.424h-.008c-5.522 0-9.996 4.478-9.996 10s4.481 10 10.004 10 10-4.478 10-10-4.477-10-10-10z" />
                                                    <path
                                                        d="m410.791 240.424h-.007c-5.522 0-9.997 4.478-9.997 10s4.481 10 10.004 10 10-4.478 10-10-4.478-10-10-10z" />
                                                    <path
                                                        d="m322.798 268.424h-.008c-5.522 0-9.996 4.478-9.996 10s4.481 10 10.004 10 10-4.478 10-10-4.477-10-10-10z" />
                                                    <path
                                                        d="m94.798 366.424h-.007c-5.523 0-9.997 4.478-9.997 10s4.481 10 10.004 10 10-4.478 10-10-4.477-10-10-10z" />
                                                    <path
                                                        d="m122.798 200.424c5.523 0 10-4.478 10-10s-4.477-10-10-10h-.007c-5.523 0-9.997 4.478-9.997 10s4.481 10 10.004 10z" />
                                                    <path
                                                        d="m224.791 436.424h-.007c-5.523 0-9.997 4.478-9.997 10s4.481 10 10.004 10 10-4.478 10-10-4.477-10-10-10z" />
                                                    <path
                                                        d="m240.791 322.424h-.007c-5.523 0-9.997 4.478-9.997 10s4.481 10 10.004 10 10-4.478 10-10-4.477-10-10-10z" />
                                                </g>
                                            </svg>
                                            {{item.Variedad}}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>

                                    <mat-form-field appearance="outline"
                                        style="width: 100%; font-size:medium; margin-top: 5%">
                                        <mat-label>Proveedor</mat-label>
                                        <mat-select formControlName="Proveedor">
                                            <mat-option *ngFor="let p of proveedores" [value]="p.Nombre"
                                                style="color: #9e1313;">
                                                {{p.Nombre}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <mat-form-field class="example-full-width" style="margin-top:12px">
                                        <mat-label>Nombre
                                        </mat-label>
                                        <input type="text" formControlName="Nombre"
                                            style="font-size:large; font-weight: bold;" matInput>
                                    </mat-form-field>

                                    <mat-form-field class="example-full-width" style="margin-top:12px">
                                        <mat-label>Costo por pieza
                                        </mat-label>
                                        <input type="number" formControlName="Costo"
                                            style="font-size:large; font-weight: bold;" matInput placeholder="$0.00"
                                            (keyup)="getCosto($event)">
                                    </mat-form-field>

                                    <mat-form-field class="example-full-width mt-3">
                                        <mat-label>Cantidad</mat-label>
                                        <input type="number" formControlName="Cantidad"
                                            style="font-size:large; font-weight: bold;" matInput placeholder="#"
                                            (keyup)="getTotal($event)">
                                    </mat-form-field>
                                    <br>
                                </div>

                                <div class="col-md-1" style="height: 300px;">
                                    <mat-divider [vertical]="true"
                                        style="height: 100%; display:inline-flex; border-color: #9e1313; margin-left: 8%; border-width: 1px; border-style: solid;">
                                    </mat-divider>
                                </div>


                                <div class="col-md-5 text-center" style="padding-left: 100px">
                                    <h1 style="font-size: xx-large; font-weight: bold; margin-top:3%">Total:</h1>
                                    <p style="font-size: xx-large; font-weight: bold;">{{total | currency}}</p>

                                    <button mat-flat-button class="btn" style="margin-top: 10%" (click)="onSubmit()"
                                        [disabled]="!ventasForm.value.Cantidad">
                                        <mat-icon>attach_money</mat-icon>
                                        Generar venta
                                    </button>
                                </div>
                            </form>

                        </div>

                    </mat-tab>
                    <mat-tab label="First">
                        <ng-template mat-tab-label>
                            <mat-icon class="example-tab-icon">date_range</mat-icon>
                            Ventas pendientes
                        </ng-template>
                        <div class="container mt-5">
                            <div class="d-flex justify-content-center row">
                                <div class="col-md-12">
                                    <div class="rounded">
                                        <div class="table-responsive table-borderless">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Fecha</th>
                                                        <th>Producto</th>
                                                        <th>Cantidad</th>
                                                        <th>Estatus</th>
                                                        <th>Total</th>
                                                        <th>Editar</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table-body">
                                                    <tr class="cell-1" data-toggle="collapse" data-target="#demo"
                                                        *ngFor="let vp of ventasPendientes">
                                                        <ng-container *ngIf="!vp.isEditable; else elseBlock">
                                                            <td>{{vp.Fecha}}</td>
                                                            <td>{{vp.Producto}}</td>
                                                            <td>{{vp.Cantidad}} KG</td>
                                                            <td><span class="badge badge-danger">Pendiente</span></td>
                                                            <td>{{vp.Total | currency}}</td>
                                                            <td>
                                                                <a style="width:15px; height: 35px; cursor: pointer; color: black"
                                                                    (click)="editVentaPendiente(vp)">
                                                                    <mat-icon style="color: red">edit</mat-icon>
                                                                </a>
                                                            </td>
                                                        </ng-container>

                                                        <ng-template #elseBlock>
                                                            <td style="width: 150px;">
                                                                <mat-form-field appearance="fill" style="width:100%;">
                                                                    <mat-label>Fecha</mat-label>
                                                                    <input matInput [matDatepicker]="picker"
                                                                        [(ngModel)]="vp.EditFecha">
                                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker #picker></mat-datepicker>
                                                                </mat-form-field>
                                                            </td>
                                                            <td style="width: 150px;">
                                                                <mat-form-field appearance="outline"
                                                                    style="width: 100%;">
                                                                    <mat-label>Variedad:</mat-label>
                                                                    <mat-select>
                                                                        <mat-option *ngFor="let v of variedad"
                                                                            [value]="v.Variedad">
                                                                            {{v.Variedad}}
                                                                        </mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                            </td>
                                                            <td>
                                                                <mat-form-field appearance="outline"
                                                                    style="max-width: 35%;">
                                                                    <mat-label>Cantidad:</mat-label>
                                                                    <input matInput type="number"
                                                                        [(ngModel)]="vp.EditCantidad">
                                                                </mat-form-field>
                                                            </td>
                                                            <td><span class="badge badge-danger">Pendiente</span></td>
                                                            <td>{{vp.Total | currency}}</td>
                                                            <td>
                                                                <a class="btn btn-success btn-sm" style="height: 30px"
                                                                    (click)="actualizarVentaPendiente(vp)">
                                                                    <mat-icon>check</mat-icon>
                                                                </a>

                                                                <a class="btn btn-danger btn-sm" style="height: 30px"
                                                                    (click)="vp.isEditable = false">
                                                                    <mat-icon>cancel</mat-icon>
                                                                </a>
                                                            </td>

                                                        </ng-template>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="container mt-5">
                            <h1 style="font-weight: bold; color: #9e1313; font-size: large; margin-left: 2%">Ventas del
                                día</h1>
                            <div class="d-flex justify-content-center row">
                                <div class="col-md-12">
                                    <div class="rounded">
                                        <div class="table-responsive table-borderless">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Fecha</th>
                                                        <th>Proveedor</th>
                                                        <th>Variedad</th>
                                                        <th>Cantidad</th>
                                                        <th>Estatus</th>
                                                        <th>Total</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table-body">
                                                    <tr class="cell-1" data-toggle="collapse" data-target="#demo"
                                                        *ngFor="let vd of ventasDia">
                                                        <td>{{vd.Fecha}}</td>
                                                        <td>{{vd.Proveedor}}</td>
                                                        <td>{{vd.Variedad}}</td>
                                                        <td>{{vd.Cantidad}} KG</td>
                                                        <td><span class="badge badge-info">Hoy</span></td>
                                                        <td>{{vd.Total | currency}}</td>
                                                        <td class="table-elipse" data-toggle="collapse"
                                                            data-target="#demo"><i
                                                                class="fa fa-ellipsis-h text-black-50"></i></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-tab>
                </mat-tab-group>

                <mat-card-content>

                </mat-card-content>
                <mat-card-actions>

                </mat-card-actions>
            </mat-card>
        </div>
    </div>

</div>

<simple-notifications></simple-notifications>